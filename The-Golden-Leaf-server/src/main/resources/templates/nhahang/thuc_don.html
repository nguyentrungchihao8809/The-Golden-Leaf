<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Th·ª±c ƒë∆°n nh√† h√†ng</title>
    <style>
      :root {
        --main-red: #e53935;
        --dark: #111;
        --light: #ffffff;
      }

      /* üåÜ N·ªÅn 3D ƒë·ªè ƒëen */
      body {
        font-family: "Segoe UI", sans-serif;
        margin: 0;
        padding: 40px;
        background: radial-gradient(circle at top left, #250000, #000000 80%);
        color: var(--light);
        overflow-x: hidden;
      }

      h1 {
        text-align: center;
        font-size: 2.3em;
        margin-bottom: 40px;
        text-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
      }

      /* ===== B·ªê C·ª§C CH√çNH ===== */
      .menu-layout {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        gap: 30px;
        flex-wrap: wrap;
      }

      /* ===== √î b√™n tr√°i: M√≥n h√¥m nay ===== */
      .today-box {
        width: 250px;
        min-height: 300px;
        background: rgba(255, 255, 255, 0.9);
        color: var(--dark);
        border-radius: 12px;
        padding: 15px 20px;
        box-shadow: 0 0 25px rgba(255, 255, 255, 0.3);
        animation: slideInLeft 1s ease;
      }

      .today-box h2 {
        text-align: center;
        color: var(--main-red);
        margin-bottom: 15px;
      }

      .today-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 0;
        border-bottom: 1px solid #ddd;
        font-size: 0.9em;
      }

      .today-item img {
        width: 45px;
        height: 45px;
        border-radius: 8px;
        object-fit: cover;
        border: 2px solid var(--main-red);
      }

      /* ===== √î b√™n ph·∫£i: M√≥n b√°n ch·∫°y ===== */
      .top-box {
        width: 250px;
        min-height: 300px;
        background: linear-gradient(145deg, #1a1a1a, #330000);
        border-radius: 12px;
        padding: 15px 20px;
        box-shadow: 0 0 25px rgba(255, 0, 0, 0.3);
        animation: slideInRight 1s ease;
      }

      .top-box h2 {
        text-align: center;
        color: var(--main-red);
        margin-bottom: 15px;
      }

      .top-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        font-size: 0.9em;
      }

      .top-item img {
        width: 45px;
        height: 45px;
        border-radius: 8px;
        object-fit: cover;
        border: 2px solid var(--main-red);
      }

      /* ===== FORM TH√äM M√ìN ===== */
      form {
        width: 700px;
        background: var(--light);
        color: var(--dark);
        padding: 25px 30px;
        border-radius: 15px;
        border-top: 6px solid var(--main-red);
        box-shadow: 0 0 35px rgba(255, 255, 255, 0.4);
        transition: transform 0.3s ease;
      }

      form:hover {
        transform: translateY(-3px);
      }

      form input,
      form textarea {
        display: block;
        margin: 12px 0;
        padding: 12px;
        width: 100%;
        border: 1px solid #ccc;
        border-radius: 6px;
        font-size: 15px;
        transition: 0.3s;
      }

      form input:focus,
      form textarea:focus {
        border-color: var(--main-red);
        box-shadow: 0 0 4px rgba(229, 57, 53, 0.4);
        outline: none;
      }

      input[type="submit"] {
        background: var(--main-red);
        color: var(--light);
        font-weight: bold;
        cursor: pointer;
        border: none;
        transition: 0.3s;
      }

      input[type="submit"]:hover {
        background: #b71c1c;
        transform: translateY(-2px);
      }

      /* ===== B·∫¢NG ===== */
      table {
        width: 95%;
        margin: 50px auto;
        border-collapse: collapse;
        background: var(--light);
        color: var(--dark);
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 0 25px rgba(255, 255, 255, 0.3);
      }

      thead {
        background: var(--dark);
        color: var(--light);
      }

      th,
      td {
        padding: 14px;
        text-align: center;
        border-bottom: 1px solid #ddd;
      }

      img {
        width: 90px;
        height: 90px;
        object-fit: cover;
        border-radius: 8px;
        border: 2px solid var(--main-red);
        transition: transform 0.3s ease;
      }

      img:hover {
        transform: scale(1.05);
      }

      /* ===== ANIMATION ===== */
      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      /* ===== TH√îNG B√ÅO ===== */
      #success-toast {
        position: fixed;
        top: 25px;
        right: 25px;
        background: linear-gradient(135deg, #43a047, #2e7d32);
        color: #fff;
        padding: 16px 26px;
        border-radius: 10px;
        box-shadow: 0 4px 14px rgba(0, 0, 0, 0.4);
        opacity: 0;
        transform: translateY(-25px);
        transition: all 0.6s ease;
        z-index: 9999;
        font-weight: 600;
        letter-spacing: 0.3px;
      }

      #success-toast.show {
        opacity: 1;
        transform: translateY(0);
      }

      @media (max-width: 900px) {
        .menu-layout {
          flex-direction: column;
          align-items: center;
        }
        .today-box,
        .top-box {
          width: 90%;
        }
        form {
          width: 90%;
        }
      }
      .nhom-mon {
        display: flex;
        align-items: center;
        gap: 20px; /* kho·∫£ng c√°ch gi·ªØa c√°c nh√≥m */
      }

      .nhom-mon label {
        display: flex; /* quan tr·ªçng: ƒë·ªÉ radio + ch·ªØ c√πng h√†ng */
        align-items: center; /* cƒÉn gi·ªØa theo chi·ªÅu d·ªçc */
        gap: 6px; /* kho·∫£ng c√°ch gi·ªØa radio v√† ch·ªØ */
        cursor: pointer;
        margin: 0;
        white-space: nowrap; /* kh√¥ng xu·ªëng d√≤ng */
      }

      .nhom-mon input[type="radio"] {
        accent-color: #e53935; /* m√†u ƒë·ªè cho radio */
      }
      .filter-box {
        width: 95%;
        margin: 25px auto;
        display: flex;
        justify-content: space-between;
        gap: 15px;
        background: rgba(255, 255, 255, 0.1);
        padding: 15px 20px;
        border-radius: 12px;
        backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .filter-box input,
      .filter-box select {
        flex: 1;
        padding: 12px;
        border-radius: 8px;
        border: none;
        font-size: 15px;
        background: rgba(255, 255, 255, 0.9);
        color: #111;
        transition: 0.3s;
      }

      .filter-box input:focus,
      .filter-box select:focus {
        box-shadow: 0 0 6px rgba(229, 57, 53, 0.6);
        outline: none;
        transform: translateY(-2px);
      }
    </style>
  </head>

  <body>
    <h1>üçΩÔ∏è TH·ª∞C ƒê∆†N NH√Ä H√ÄNG</h1>

    <!-- ‚úÖ Th√¥ng b√°o th√™m th√†nh c√¥ng -->
    <div
      id="success-toast"
      th:if="${successMessage}"
      th:text="${successMessage}"
    ></div>

    <div class="menu-layout">
      <!-- M√≥n h√¥m nay -->
      <div class="today-box">
        <h2>üìÖ M√≥n ƒÉn h√¥m nay</h2>
        <div class="today-item">
          <img src="/uploads/pho.jpg" alt="Ph·ªü" />
          <span>Ph·ªü b√≤ ƒë·∫∑c bi·ªát</span>
        </div>
        <div class="today-item">
          <img src="/uploads/buncha.jpg" alt="B√∫n ch·∫£" />
          <span>B√∫n ch·∫£ H√† N·ªôi</span>
        </div>
      </div>

      <!-- Form th√™m m√≥n -->
      <form
        th:action="@{/nhahang/thuc_don}"
        method="post"
        enctype="multipart/form-data"
        th:object="${monAn}"
      >
        <input
          type="text"
          th:field="*{tenMon}"
          placeholder="T√™n m√≥n ƒÉn"
          required
        />
        <input
          type="number"
          th:field="*{gia}"
          placeholder="Gi√° (VNƒê)"
          required
        />
        <textarea th:field="*{moTa}" placeholder="M√¥ t·∫£" required></textarea>

        <!-- ===== Ch·ªçn nh√≥m m√≥n ===== -->
        <div class="nhom-mon">
          <span>Nh√≥m m√≥n:</span>
          <label>
            <input type="radio" th:field="*{nhom}" value="KHAI_VI" required />
            Khai v·ªã
          </label>
          <label>
            <input type="radio" th:field="*{nhom}" value="MON_CHINH" />
            M√≥n ch√≠nh
          </label>
          <label>
            <input type="radio" th:field="*{nhom}" value="TRANG_MIENG" />
            Tr√°ng mi·ªáng
          </label>
        </div>
        <input type="file" name="fileAnh" accept="image/*" required />

        <input type="submit" value="‚ûï Th√™m m√≥n ƒÉn" />
      </form>

      <!-- M√≥n b√°n ch·∫°y -->
      <div class="top-box">
        <h2>üî• M√≥n b√°n ch·∫°y nh·∫•t</h2>
        <div class="top-item">
          <img src="/uploads/lau.jpg" alt="L·∫©u" />
          <span>L·∫©u th√°i h·∫£i s·∫£n</span>
        </div>
        <div class="top-item">
          <img src="/uploads/steak.jpg" alt="Steak" />
          <span>B√≤ b√≠t t·∫øt ki·ªÉu Ph√°p</span>
        </div>
      </div>
    </div>

    <!-- üîç THANH T√åM KI·∫æM & L·ªåC -->
    <div class="filter-box">
      <input
        type="text"
        id="searchInput"
        placeholder="T√¨m theo t√™n m√≥n ho·∫∑c m√¥ t·∫£..."
      />

      <select id="sortPrice">
        <option value="">S·∫Øp x·∫øp gi√°</option>
        <option value="asc">Gi√° tƒÉng d·∫ßn</option>
        <option value="desc">Gi√° gi·∫£m d·∫ßn</option>
      </select>

      <select id="filterGroup">
        <option value="">L·ªçc theo nh√≥m m√≥n</option>
        <option value="KHAI_VI">Khai v·ªã</option>
        <option value="MON_CHINH">M√≥n ch√≠nh</option>
        <option value="TRANG_MIENG">Tr√°ng mi·ªáng</option>
      </select>
    </div>

    <!-- Danh s√°ch m√≥n -->
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>T√™n m√≥n</th>
          <th>Gi√°</th>
          <th>M√¥ t·∫£</th>
          <th>Nh√≥m</th>
          <th>·∫¢nh</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="mon : ${monAnList}">
          <td th:text="${mon.idThucDon}"></td>
          <td th:text="${mon.tenMon}"></td>
          <td th:text="${mon.gia} + ' VNƒê'"></td>
          <td th:text="${mon.moTa}"></td>
          <td th:text="${mon.nhom}"></td>
          <td>
            <img
              th:if="${mon.anh != null}"
              th:src="@{'/uploads/' + ${mon.anh}}"
              alt="·∫¢nh m√≥n ƒÉn"
            />
          </td>
        </tr>
      </tbody>
    </table>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const toast = document.getElementById("success-toast");
        if (toast) {
          // Hi·ªáu ·ª©ng xu·∫•t hi·ªán m∆∞·ª£t
          setTimeout(() => toast.classList.add("show"), 200);
          // Gi·ªØ l·∫°i 4 gi√¢y r·ªìi ·∫©n d·∫ßn
          setTimeout(() => toast.classList.remove("show"), 4000);
        }
      });
      document.addEventListener("DOMContentLoaded", () => {
        const searchInput = document.getElementById("searchInput");
        const sortPrice = document.getElementById("sortPrice");
        const filterGroup = document.getElementById("filterGroup");
        const rows = Array.from(document.querySelectorAll("tbody tr"));

        function applyFilters() {
          let filtered = [...rows];

          // T√¨m ki·∫øm t√™n + m√¥ t·∫£
          const keyword = searchInput.value.toLowerCase();
          filtered = filtered.filter((r) =>
            r.innerText.toLowerCase().includes(keyword)
          );

          // L·ªçc nh√≥m m√≥n
          if (filterGroup.value !== "") {
            filtered = filtered.filter(
              (r) => r.children[4].innerText.trim() === filterGroup.value
            );
          }

          // S·∫Øp x·∫øp gi√°
          if (sortPrice.value !== "") {
            filtered.sort((a, b) => {
              const priceA = parseInt(a.children[2].innerText);
              const priceB = parseInt(b.children[2].innerText);
              return sortPrice.value === "asc"
                ? priceA - priceB
                : priceB - priceA;
            });
          }

          // Reset b·∫£ng
          const tbody = document.querySelector("tbody");
          tbody.innerHTML = "";
          filtered.forEach((r) => tbody.appendChild(r));
        }

        searchInput.addEventListener("input", applyFilters);
        sortPrice.addEventListener("change", applyFilters);
        filterGroup.addEventListener("change", applyFilters);
      });
    </script>
  </body>
</html>
